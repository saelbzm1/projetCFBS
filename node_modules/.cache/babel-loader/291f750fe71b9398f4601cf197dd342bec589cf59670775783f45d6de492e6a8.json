{"ast":null,"code":"import { __awaiter as e } from \"tslib\";\nimport t from \"qrcode\";\nimport * as o from \"react\";\nimport { Logger as r } from \"aws-amplify\";\nimport { authenticatorTextUtil as a, getTotpCodeURL as m } from \"@aws-amplify/ui\";\nimport { Flex as i } from \"../../../primitives/Flex/Flex.mjs\";\nimport { Heading as n } from \"../../../primitives/Heading/Heading.mjs\";\nimport { useAuthenticator as l } from \"@aws-amplify/ui-react-core\";\nimport { useCustomComponents as s } from \"../hooks/useCustomComponents/index.mjs\";\nimport { useFormHandlers as c } from \"../hooks/useFormHandlers/useFormHandlers.mjs\";\nimport { ConfirmSignInFooter as d } from \"../shared/ConfirmSignInFooter.mjs\";\nimport { RemoteErrorMessage as p } from \"../shared/RemoteErrorMessage.mjs\";\nimport { FormFields as u } from \"../shared/FormFields.mjs\";\nimport { RouteContainer as f } from \"../RouteContainer/RouteContainer.mjs\";\nconst g = new r(\"SetupTOTP-logger\"),\n  {\n    getSetupTOTPText: h,\n    getCopiedText: E,\n    getLoadingText: v\n  } = a,\n  C = _ref => {\n    let {\n      className: r,\n      variation: a\n    } = _ref;\n    var n;\n    const {\n        totpSecretCode: h,\n        isPending: y,\n        user: H,\n        QRFields: w\n      } = l(e => [e.isPending, e.totpSecretCode]),\n      {\n        handleChange: S,\n        handleSubmit: F\n      } = c(),\n      {\n        components: {\n          SetupTOTP: {\n            Header: x = C.Header,\n            Footer: T = C.Footer\n          }\n        }\n      } = s(),\n      [j, V] = o.useState(!0),\n      [b, P] = o.useState(),\n      [R, k] = o.useState(\"COPY\"),\n      {\n        totpIssuer: L = \"AWSCognito\",\n        totpUsername: M = null == H ? void 0 : H.username\n      } = null !== (n = w) && void 0 !== n ? n : {},\n      O = o.useCallback(() => e(void 0, void 0, void 0, function* () {\n        try {\n          const e = m(L, M, h),\n            o = yield t.toDataURL(e);\n          P(o);\n        } catch (e) {\n          g.error(e);\n        } finally {\n          V(!1);\n        }\n      }), [L, M, h]);\n    o.useEffect(() => {\n      b || O();\n    }, [O, b]);\n    return o.createElement(f, {\n      className: r,\n      variation: a\n    }, o.createElement(\"form\", {\n      \"data-amplify-form\": \"\",\n      \"data-amplify-authenticator-setup-totp\": \"\",\n      method: \"post\",\n      onChange: S,\n      onSubmit: F\n    }, o.createElement(i, {\n      as: \"fieldset\",\n      direction: \"column\",\n      isDisabled: y\n    }, o.createElement(x, null), o.createElement(i, {\n      direction: \"column\"\n    }, j ? o.createElement(\"p\", null, v(), \"…\") : o.createElement(\"img\", {\n      \"data-amplify-qrcode\": !0,\n      src: b,\n      alt: \"qr code\",\n      width: \"228\",\n      height: \"228\"\n    }), o.createElement(i, {\n      \"data-amplify-copy\": !0\n    }, o.createElement(\"div\", null, h), o.createElement(i, {\n      \"data-amplify-copy-svg\": !0,\n      onClick: () => {\n        navigator.clipboard.writeText(h), k(E());\n      }\n    }, o.createElement(\"div\", {\n      \"data-amplify-copy-tooltip\": !0\n    }, R), o.createElement(\"svg\", {\n      width: \"24\",\n      height: \"24\",\n      viewBox: \"0 0 24 24\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }, o.createElement(\"path\", {\n      d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n    })))), o.createElement(u, null), o.createElement(p, null)), o.createElement(d, null), o.createElement(T, null))));\n  };\nC.Header = function () {\n  return o.createElement(n, {\n    level: 3\n  }, h());\n}, C.Footer = function () {\n  return null;\n};\nexport { C as SetupTOTP };","map":{"version":3,"names":["__awaiter","e","t","o","Logger","r","authenticatorTextUtil","a","getTotpCodeURL","m","Flex","i","Heading","n","useAuthenticator","l","useCustomComponents","s","useFormHandlers","c","ConfirmSignInFooter","d","RemoteErrorMessage","p","FormFields","u","RouteContainer","f","g","getSetupTOTPText","h","getCopiedText","E","getLoadingText","v","C","_ref","className","variation","totpSecretCode","isPending","y","user","H","QRFields","w","handleChange","S","handleSubmit","F","components","SetupTOTP","Header","x","Footer","T","j","V","useState","b","P","R","k","totpIssuer","L","totpUsername","M","username","O","useCallback","toDataURL","error","useEffect","createElement","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level"],"sources":["C:/Users/sael.bouzemarene/cfbsprojet/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.mjs"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import t from\"qrcode\";import*as o from\"react\";import{Logger as r}from\"aws-amplify\";import{authenticatorTextUtil as a,getTotpCodeURL as m}from\"@aws-amplify/ui\";import{Flex as i}from\"../../../primitives/Flex/Flex.mjs\";import{Heading as n}from\"../../../primitives/Heading/Heading.mjs\";import{useAuthenticator as l}from\"@aws-amplify/ui-react-core\";import{useCustomComponents as s}from\"../hooks/useCustomComponents/index.mjs\";import{useFormHandlers as c}from\"../hooks/useFormHandlers/useFormHandlers.mjs\";import{ConfirmSignInFooter as d}from\"../shared/ConfirmSignInFooter.mjs\";import{RemoteErrorMessage as p}from\"../shared/RemoteErrorMessage.mjs\";import{FormFields as u}from\"../shared/FormFields.mjs\";import{RouteContainer as f}from\"../RouteContainer/RouteContainer.mjs\";const g=new r(\"SetupTOTP-logger\"),{getSetupTOTPText:h,getCopiedText:E,getLoadingText:v}=a,C=({className:r,variation:a})=>{var n;const{totpSecretCode:h,isPending:y,user:H,QRFields:w}=l((e=>[e.isPending,e.totpSecretCode])),{handleChange:S,handleSubmit:F}=c(),{components:{SetupTOTP:{Header:x=C.Header,Footer:T=C.Footer}}}=s(),[j,V]=o.useState(!0),[b,P]=o.useState(),[R,k]=o.useState(\"COPY\"),{totpIssuer:L=\"AWSCognito\",totpUsername:M=(null==H?void 0:H.username)}=null!==(n=w)&&void 0!==n?n:{},O=o.useCallback((()=>e(void 0,void 0,void 0,(function*(){try{const e=m(L,M,h),o=yield t.toDataURL(e);P(o)}catch(e){g.error(e)}finally{V(!1)}}))),[L,M,h]);o.useEffect((()=>{b||O()}),[O,b]);return o.createElement(f,{className:r,variation:a},o.createElement(\"form\",{\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:S,onSubmit:F},o.createElement(i,{as:\"fieldset\",direction:\"column\",isDisabled:y},o.createElement(x,null),o.createElement(i,{direction:\"column\"},j?o.createElement(\"p\",null,v(),\"…\"):o.createElement(\"img\",{\"data-amplify-qrcode\":!0,src:b,alt:\"qr code\",width:\"228\",height:\"228\"}),o.createElement(i,{\"data-amplify-copy\":!0},o.createElement(\"div\",null,h),o.createElement(i,{\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(h),k(E())}},o.createElement(\"div\",{\"data-amplify-copy-tooltip\":!0},R),o.createElement(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},o.createElement(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})))),o.createElement(u,null),o.createElement(p,null)),o.createElement(d,null),o.createElement(T,null))))};C.Header=function(){return o.createElement(n,{level:3},h())},C.Footer=function(){return null};export{C as SetupTOTP};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}